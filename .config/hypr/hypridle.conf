general {
    # 1. This command is executed by hypridle when a D-Bus 'lock-session' signal is received.
    # loginctl lock-session sends this signal, and before_sleep_cmd sends loginctl lock-session.
    # 'pidof hyprlock || hyprlock' checks if hyprlock is running; if not, it starts it.
    lock_cmd = pidof hyprlock || hyprlock 

    # 2. CRUCIAL: This command runs just before the system suspends (sleep).
    # It tells logind (via D-Bus) to lock the session, which in turn triggers lock_cmd above.
    before_sleep_cmd = loginctl lock-session 

    # 3. Recommended: This command runs immediately after the system wakes up.
    # It turns the display back on using the DPMS protocol, preventing a potential black screen.
    after_sleep_cmd = hyprctl dispatch dpms on 
}


 listener {
     timeout = 600            # Lock screen after 10 minutes of inactivity
     on-timeout = loginctl lock-session
 }

 listener {
     timeout = 3600            # Suspend system after 1 hour of inactivity
     on-timeout = systemctl suspend
 }
